# Production Environment Variables
# Copy this file to .env and update with your production values

# ============================================
# APPLICATION SETTINGS
# ============================================

# Environment
NODE_ENV=production

# Application URL (your domain with https)
NEXT_PUBLIC_APP_URL=https://booking.yourdomain.com

# ============================================
# DATABASE CONFIGURATION (Docker PostgreSQL)
# ============================================

# Database connection URL for Prisma
DATABASE_URL="postgresql://backroom_user:CHANGE_THIS_STRONG_PASSWORD@localhost:5432/backroom_bookings?schema=public"

# Docker PostgreSQL environment variables
DB_USER=backroom_user
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
DB_NAME=backroom_bookings

# ============================================
# STRIPE CONFIGURATION
# ============================================

# Live Stripe keys (get from https://dashboard.stripe.com/apikeys)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_live_..."
STRIPE_SECRET_KEY="sk_live_..."

# Webhook secret (get from https://dashboard.stripe.com/webhooks)
STRIPE_WEBHOOK_SECRET="whsec_..."

# ============================================
# EMAIL CONFIGURATION (SendGrid)
# ============================================

# SendGrid API Key (get from https://app.sendgrid.com/settings/api_keys)
SENDGRID_API_KEY="SG...."

# Email settings
EMAIL_FROM="bookings@yourdomain.com"
EMAIL_FROM_NAME="Your Restaurant Name"

# ============================================
# AUTHENTICATION
# ============================================

# Cookie domain (optional, helps with subdomains)
# Example: .yourdomain.com (with leading dot for all subdomains)
# Leave empty to use default domain from request
# COOKIE_DOMAIN=.yourdomain.com

# JWT Secret (generate with: openssl rand -base64 64)
JWT_SECRET="GENERATE_A_VERY_LONG_RANDOM_STRING_HERE_AT_LEAST_64_CHARACTERS"

# Admin credentials (change these!)
ADMIN_EMAIL="admin@yourdomain.com"
ADMIN_PASSWORD="CHANGE_THIS_STRONG_ADMIN_PASSWORD"

# ============================================
# GITHUB WEBHOOK (for auto-deployment)
# ============================================
# Not needed if deploying manually or using other CI/CD methods

# Uncomment below if using GitHub webhooks for auto-deployment:
# GITHUB_WEBHOOK_SECRET="GENERATE_WEBHOOK_SECRET_HERE"
# WEBHOOK_PORT=9001

# ============================================
# CLOUDFLARE CONFIGURATION (optional)
# ============================================

# For cache purging on deployment (optional)
# CF_ZONE_ID="your-cloudflare-zone-id"
# CF_API_TOKEN="your-cloudflare-api-token"

# ============================================
# APPLICATION FEATURES
# ============================================

# Enable/disable features
ENABLE_STRIPE_PAYMENTS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_BOOKING_CONFIRMATIONS=true

# Business settings
RESTAURANT_NAME="The Backroom Bar"
RESTAURANT_PHONE="+1234567890"
RESTAURANT_ADDRESS="123 Main St, City, State 12345"
TIMEZONE="America/New_York"

# Booking settings
MAX_PARTY_SIZE=20
MIN_PARTY_SIZE=1
BOOKING_ADVANCE_DAYS=30
CANCELLATION_HOURS=24

# ============================================
# SECURITY SETTINGS
# ============================================

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS="https://booking.yourdomain.com,https://yourdomain.com"

# Session settings
SESSION_MAX_AGE=86400  # 24 hours in seconds
SESSION_NAME="booking_session"

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# MONITORING & LOGGING
# ============================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# External monitoring (optional)
# SENTRY_DSN="https://..."
# NEW_RELIC_LICENSE_KEY="..."

# ============================================
# PERFORMANCE TUNING
# ============================================

# Next.js build settings
NEXT_TELEMETRY_DISABLED=1

# Node.js memory (for PM2)
NODE_OPTIONS="--max-old-space-size=1024"

# ============================================
# NOTES FOR PRODUCTION SETUP
# ============================================

# 1. Generate strong passwords:
#    - DB_PASSWORD: openssl rand -base64 32
#    - JWT_SECRET: openssl rand -base64 64
#    - GITHUB_WEBHOOK_SECRET: openssl rand -hex 32

# 2. Required external services:
#    - Stripe account with live keys
#    - SendGrid account with verified domain
#    - Cloudflare account (for CDN/proxy)

# 3. Security checklist:
#    - [ ] Change all default passwords
#    - [ ] Use strong, unique passwords
#    - [ ] Set up domain in Cloudflare
#    - [ ] Enable Cloudflare proxy (orange cloud)
#    - [ ] Configure firewall rules
#    - [ ] Set up SSL certificates
#    - [ ] Enable 2FA on all services

# 4. Database backup reminder:
#    - Set up automated daily backups
#    - Test restore procedure
#    - Store backups off-site

# 5. Monitoring setup:
#    - Configure PM2 monitoring
#    - Set up uptime monitoring
#    - Configure error tracking
#    - Set up log aggregation